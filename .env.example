# SOM environment template
# Copy to .env and adjust as needed. Values are consumed via --dart-define.
#
# For local development: use values below
# For production (Supabase Cloud + Google Cloud Run): see PRODUCTION section

# ==============================================================================
# SUPABASE CONFIGURATION
# ==============================================================================
# Local development (Supabase CLI)
SUPABASE_URL=http://127.0.0.1:55511
SUPABASE_ANON_KEY=your_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
SUPABASE_JWT_SECRET=your_jwt_secret

# For Supabase Cloud (production):
# SUPABASE_URL=https://your-project-id.supabase.co
# SUPABASE_ANON_KEY=eyJhbGc...  (from Supabase Dashboard > Settings > API)
# SUPABASE_SERVICE_ROLE_KEY=eyJhbGc...  (from Supabase Dashboard > Settings > API)
# SUPABASE_JWT_SECRET=your-jwt-secret  (from Supabase Dashboard > Settings > API > JWT Secret)

SUPABASE_STORAGE_BUCKET=som-assets
SUPABASE_SCHEMA=som
SUPABASE_PROJECT_ID=your-supabase-project-id
SUPABASE_APPLY_STORAGE_RLS=true
SUPABASE_APPLY_STORAGE_RLS_STRICT=false

# ==============================================================================
# API CONFIGURATION
# ==============================================================================
APP_BASE_URL=http://localhost:8090

# Development fixtures (disable in production)
DEV_FIXTURES=true
DEV_FIXTURES_PASSWORD=DevPass123!
SYSTEM_ADMIN_EMAIL=system-admin@som.local
SYSTEM_ADMIN_PASSWORD=ChangeMe123!

# ==============================================================================
# GOOGLE CLOUD RUN CONFIGURATION (Production)
# ==============================================================================
# Project settings
GCLOUD_PROJECT_ID=your-gcloud-project-id
GCLOUD_REGION=europe-west1
GCLOUD_SERVICE_NAME=som-api

# Cloud Run settings
CLOUD_RUN_MIN_INSTANCES=0
CLOUD_RUN_MAX_INSTANCES=10
CLOUD_RUN_MEMORY=512Mi
CLOUD_RUN_CPU=1
CLOUD_RUN_TIMEOUT=300
CLOUD_RUN_CONCURRENCY=80

# Container registry
ARTIFACT_REGISTRY_REPO=som-docker

# Email providers
EMAIL_PROVIDER=smtp
EMAIL_FROM=no-reply@som.local
EMAIL_FROM_NAME=SOM
EMAIL_DEFAULT_LOCALE=en
EMAIL_OUTBOX_PATH=

SMTP_HOST=inbucket
SMTP_PORT=2500
SMTP_USERNAME=inbucket
SMTP_PASSWORD=inbucket
SMTP_USE_TLS=false
SMTP_ALLOW_INSECURE=true

SENDGRID_API_KEY=

# CORS / security headers
CORS_ALLOWED_ORIGINS=http://localhost:8090,http://som.localhost:8090,http://tenant.localhost:8090
CORS_ALLOW_CREDENTIALS=false
ENABLE_HSTS=false
HSTS_MAX_AGE_SECONDS=31536000
CSP=

# Rate limiting (requests per window)
RATE_LIMIT_LOGIN=10
RATE_LIMIT_LOGIN_WINDOW_MINUTES=15
RATE_LIMIT_RESET=5
RATE_LIMIT_RESET_WINDOW_MINUTES=15
RATE_LIMIT_PDF=60
RATE_LIMIT_PDF_WINDOW_MINUTES=60
RATE_LIMIT_EXPORT=20
RATE_LIMIT_EXPORT_WINDOW_MINUTES=60

# Scheduler worker
ENABLE_SCHEDULER=false
SCHEDULER_INTERVAL_MINUTES=5
SCHEDULER_RUN_ONCE=false

# Flutter (web) build/runtime
API_BASE_URL=http://127.0.0.1:8081
SUPABASE_URL=http://127.0.0.1:55511
SUPABASE_ANON_KEY=your_anon_key
SUPABASE_SCHEMA=som
DEV_QUICK_LOGIN=true

# Local hostnames (optional)
SOM_REQUIRE_HOSTS=false
SOM_SKIP_HOSTS_CHECK=false
SOM_PING_HOSTS=true
